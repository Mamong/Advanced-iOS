# 141-160
#### 141.对于Objective-C，你认为它最大的优点和最大的不足是什么？对于不足之处，现在有没有可用的方法绕过这些不足来实现需求。如果可以的话，你有没有考虑或者实践过重新实现OC的一些功能，如果有，具体会如何做？

答：最大的优点是它的运行时特性，不足是没有命名空间，对于命名冲突，可以使用长命名法或特殊前缀解决，如果是引入的第三方库之间的命名冲突，可以使用link命令及flag解决冲突。

#### 142.你实现过一个框架或者库以供别人使用么？如果有，请谈一谈构建框架或者库时候的经验；如果没有，请设想和设计框架的public的API，并指出大概需要如何做、需要注意一些什么方面，来使别人容易地使用你的框架。

答：抽象和封装，方便使用。首先是对问题有充分的了解，比如构建一个文件解压压缩框架，从使用者的角度出发，只需关注发送给框架一个解压请求，框架完成复杂文件的解压操作，并且在适当的时候通知给使用者，如解压完成、解压出错等。在框架内部去构建对象的关系，通过抽象让其更为健壮、便于更改。其次是API的说明文档。


#### 143.app的崩溃率是多少？线上app出现问题如何解决？

答：app 的装载次数和埋点统计次数的比值，线上的app出现哪些问题呢？比如后台接口出错了，客户端根本就不可能出现crash，因为做了数据保护，如果是app本身的缺陷，只能通过App Store快速审核通道进行解决bug（其实App应该做灰度发布的，但是你一个小公司，有资金和时间做么？）

#### 144. Runloop是什么？如何用？在什么场景下会用到？

答：Run Loop是一个事件处理的循环，不停的调动工作以及处理输入事件；比如一个UI事件、一个NSTimer、一个Delegate回调都做为一个task在RunLoop中运行一次而已。

RunLoop是与线程进行关联的，可以这样理解，每一个线程中会创建一个RunLoop（不一定每个线程都有RunLoop），而不是一个task创建一个RunLoop。

系统会在主线程开始运行时，隐式的启动主线程的RunLoop，而辅助线程不会自动启动，需要显式的启动。

具体的内容参考官方文档。`https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html# //apple_ref/doc/uid/10000057i-CH16-SW1`

#### 145. 数据列表需要展示大量数据，如何优化？至少三个方面？​

答：第一先利用TableVIew或者CollectionView的重用机制；第二再定制各种样式的Cell ；重点第三通过CoreText或者TextKit来做富文本的展示，尽量减少UI控件的绘制工作。再深入一点：通过空间换取时间，利用缓存方式进行缓存Cell的高度，从而减少计算的时间​；

这个tableviewcell加载datasouce的时候，当数据量很大，也就是接近万的时候会出现的问题。很卡，也许会崩溃，就算你做了上边的三个操作依然是。​

所以这里我要说的就是，datasouce数组必须做成缓冲区，也就是入队出队操作。datasouce最多加载我这里自己定义的，200条。下拉加载更多，当已经加载到200条的时候，这个时候就需要缓冲了，入队出队操作。如果这里不做处理，当你加载上千上万条数据的时候，你的页面必卡。而且他这个很大的定义，我觉得至少上万，所以这里必须做这样的处理，就像你一个大水缸 不停的加水，在大的缸也会有装满的一天。尽量用cell描绘每一种cell，提高绘制速率，以及复用。​

​

#### 146. SQLite和CoreData区别？优缺点？FBDataBase使用？coreData结构构成？

答：SQLite和CoreData没有本质上的区别，CoreData是对原始SQLite数据库API访问进行了一层封装，通过面向对象的接口进行管理数据缓存，比使用SQL语句操作SQLIte数据库更加简单和方便，当然CoreData也有缺点，比如API不够用，处理大量数据会变得缓慢，SQLite就没有这样的问题，只要写SQL语句的人有经验，大部分是可以避免的，当然SQLite也会有一些弊端，比如网络数据怎样自动化映射到数据库中？而CoreData就有类似由Github写的Mantle开源库，很好的处理这个问题。CoreData提供一个管理上下文，数据模型，数据持久化存储助理协调器。
​​​​

#### 147. 上千条数据需要插入数据表，如何优化提高效率？​

答：适当的使用索引，因为过分使用索引会引起低效率的情况，把数据库进行分区存储，或者把数据进行分批插入，每一批插入有一个通知回调，使用事务，FMDB中有现成的代码，beginTransaction。​​

#### 148. 同时对同一张表进行操作？​

答：面试官问的应该是如何在多线程中访问同一张表，使用锁、串行调度队列等都可以，参考FMDB中的FMDBtabaseQueue。​或者说？：6.这个问题好牵强，对同一个表操作？应该是想问同事操作数据库吧？如果在线程琐上的问题，可以利用原子访问、互斥等方式进行避免资源竞争的问题？

#### 149. 数据库什么时候打开？什么时候关闭？​

答：数据库在使用时打开，使用完立即关闭以节省资源。但是在一些特殊情况下，可以保持较长时间的打开，以提升效率，例如在某个时间段，会频繁的写入数据。具体还是要看业务。​

#### 150、 WebView突然弹出广告或者垃圾信息？是什么原因造成的？如何解决？​

答：WebView突然弹出广告？那肯定是H的错啦！当然我们可以进行避免，通过WebView的delegate进行URL截取，然后拿关键词与常出现的广告注入标识库进行匹配，从而达到拦截的作用​

#### 151、 ASI和AFNetWorking区别？核心实现上有什么不同？​

答：ASI是基于底层CFNetworking框架进行开发，注重于网络数据的缓存，ASI太重，已经无人维护。AFNetworking是基于NSURLSession (2.0级以前是NSURLConnection）框架进行开发的，注重于网络数据的处理，快速请求的过程，使用很方便。核心技术已经在上面表达了​

#### 152、 项目中遇到过什么重大问题？如何解决的？​

答：项目中遇到的重大问题？好吧！一般的App都不会出现，无非就是多线程、数据库操作、视频音频格式处理等等！只要通过SO进行查阅，一般都可以解决掉一半的问题，实在不行，那就需要同事的支持，然后共同解决，如果一定要描述解决方案的话，说明他想招你做主管或者开发经理​

#### 153、 在做项目中使用过哪些自己认为比较好的技术？​

答：技术没有好不好，比如为了一个RSS App，你用一个VIPER模式，然后搞个状态机，好高级的样子，但是没有必要，对于业务变动有一个比较好的设计模式就好了​

#### 154、 app版本升级中需要对数据表等做更新，此时如何数据库升级？​

答：app升级需要把数据库的数据进行迁移，数据合并（具体还得看项目的情况哦！）​

#### 155、 category类目的作用？类目是否可以添加属性？类目中得方法名和系统的重名会怎样？​

答：category的作用是给开发者提供一个不需要修改源代码就可以添加方法；category不可以添加属性。在category中可以生成@prorperty NSString *name，然后实现getter/setter方法，进一步可以使用runtime来关联对象，但是这个应该算做runtime的用法，因为属性很重要的一点，是会自动生成_name这样的实例变量；如果category的方法名和系统重名的时候，直接重载了系统的方法


#### 156、 封装类库给别人用，需要注意哪些问题？

答：如果是封装UI组件，我会考虑高内聚，低耦合的方式，提供简单又丰富的API，比如工厂的创建方法​

#### 157、 多线程里面主要由哪几种？它们的优缺点？​

答：多线程：NSOperation配合NSOperationQueue，GCD，NSThread；GCD的缺点难于管理，不可取消和暂定，NSThread难于定位问题，NSOperation可用性高，可支持调度、暂停，取消等功能，一般都会才去继承NSOperation来做更深入的定制线程​

#### 158、 实现类似网易新闻的滑动标签选项，需要写哪几个类？​

答：网易新闻的滚动标签和容器都是一个联动的ScrollView，通过统一管理数据源，利用KVO做两个ScrollView的联动工作（项目https://github.com/JackTeam/XHNewsFrameworkExample）（wiki:https://github.com/JackTeam/XHNewsFrameworkExample/wiki/XHNewsFramework框架文档）​

#### 159、 比如一个第三方分享，每次调用都比较耗时，而且好多页面都用到了，那如何监控次耗时操作在所有页面的耗时时间？​

答：不懂

#### 160、 [__NSString close] unrecogonized selector ​

答：这里可能是动态类型的考点吧！ 如果一个对象不明确是什么类型，却用了某一种类型的方法，导致了crash，这里可以通过两种方法来防止，第一简单的使用respondsToSelector来检查，第二就是少用动态类型的对象，尽量使用强制的类型​


